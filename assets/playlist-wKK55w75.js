import{v as l,p as P,S as p}from"./core-demo-header-component-DMYgftkn.js";function r(i,t,e){return(t=x(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function v(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var s=e.call(i,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function x(i){var t=v(i,"string");return typeof t=="symbol"?t:t+""}const I=l.getPlugin("plugin"),m=l.log.createLogger("pillarbox-playlist");class b extends I{toggleRepeat(t=void 0){this.repeat=t??!this.repeat}toggleAutoadvance(t=void 0){this.autoadvance=t??!this.autoadvance}constructor(t,e){super(t),r(this,"items_",[]),r(this,"currentIndex_",-1),r(this,"previousNavigationThreshold",3),r(this,"repeat",!1),r(this,"autoadvance",!1),r(this,"onEnded_",()=>this.handleEnded()),e=this.options_=l.obj.merge(this.options_,e),e.playlist&&e.playlist.length&&t.ready(()=>{this.load(...e.playlist)}),this.autoadvance=!!e.autoadvance,this.repeat=!!e.repeat,this.previousNavigationThreshold=Number.isFinite(e.previousNavigationThreshold)?e.previousNavigationThreshold:this.previousNavigationThreshold,this.player.on("ended",this.onEnded_)}dispose(){this.player.off("ended",this.onEnded_)}load(t){this.items_=[...t],this.select(0)}push(...t){this.items_.push(...t),this.updateState_()}splice(t,e,...s){const n=s.length,o=this.items_.splice(t,e,...s),d=o.length;return this.currentIndex_>=t&&this.currentIndex_<t+d?this.currentIndex_=-1:this.currentIndex_>=t&&(this.currentIndex_=this.currentIndex_-d+n),this.updateState_(),o}clear(){this.items_=[],this.currentIndex_=-1,this.updateState_()}reverse(){this.items_.length&&(this.items_.reverse(),this.currentIndex_=this.items_.length-1-this.currentIndex_,this.updateState_())}sort(t){if(!this.items_.length)return;const e=this.currentItem;this.items_.sort(t),this.currentIndex_=this.items_.indexOf(e),this.updateState_()}get currentIndex(){return this.currentIndex_}get currentItem(){return this.items_[this.currentIndex_]}get items(){return[...this.items_]}select(t){if(t<0||t>=this.items_.length){m.warn(`Index: ${t} is out of bounds (The current playlist has ${this.items_.length} elements)`);return}if(t===this.currentIndex_){m.warn(`Index: ${t} is already selected`);return}const e=this.items_[t];this.player.src(e.sources),this.player.poster(e.poster),this.currentIndex_=t,this.updateState_()}next(){if(this.hasNext()){this.select(this.currentIndex_+1);return}this.repeat&&this.select(0)}hasNext(){return this.currentIndex_+1<this.items_.length}previous(){if(!this.isLive()&&this.player.currentTime()>this.previousNavigationThreshold){this.player.currentTime(0);return}this.select(this.currentIndex_-1)}isLive(){const t=this.player.liveTracker;return t&&t.isLive()}hasPrevious(){return this.currentIndex_>0}handleEnded(){this.autoadvance&&this.next()}shuffle(){for(let t=this.items_.length-1;t>0;t-=1){const e=Math.floor(Math.random()*(t+1));[this.items_[t],this.items_[e]]=[this.items_[e],this.items_[t]],this.currentIndex_===t?this.currentIndex_=e:this.currentIndex_===e&&(this.currentIndex_=t)}this.updateState_()}updateState_(){this.setState({items:JSON.stringify(this.items_),currentIndex:this.currentIndex_})}}l.registerPlugin("pillarboxPlaylist",b);function c(i,t,e){return(t=C(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function y(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,s)}return e}function g(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?y(Object(e),!0).forEach(function(s){c(i,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):y(Object(e)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(e,s))})}return i}function _(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var s=e.call(i,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function C(i){var t=_(i,"string");return typeof t=="symbol"?t:t+""}const S=l.getComponent("Button");let B=class extends S{constructor(t,e){var s,n;super(t,e),this.selected(e.index===this.playlist().currentIndex),this.controlText(`${(s=this.options_.item.data)===null||s===void 0?void 0:s.title} - ${l.formatTime((n=this.options_.item.data)===null||n===void 0?void 0:n.duration)}`)}playlist(){return this.player().pillarboxPlaylist()}handleClick(t){super.handleClick(t),this.playlist().select(this.options_.index)}selected(t){this.toggleClass("vjs-selected",t)}buildCSSClass(){return`pbw-playlist-item-button vjs-visible-text ${super.buildCSSClass()}`}};l.registerComponent("PillarboxPlaylistMenuItem",B);const $=l.getComponent("PillarboxPlaylistMenuItem"),u=l.getComponent("Button"),h=l.getComponent("Component"),w=l.getComponent("ModalDialog");class j extends w{constructor(t,e){e.temporary=!1,super(t,e),c(this,"_onPlaylistStateChanged",({changes:s})=>{"items"in s&&(this.removeItems(),this.renderItems()),"currentIndex"in s&&this.select(s.currentIndex.to)}),this.fill(),this.renderComponent(),this.playlist().on("statechanged",this._onPlaylistStateChanged)}buildCSSClass(){return`pbw-playlist-dialog ${super.buildCSSClass()}`}dispose(){this.playlist().off("statechanged",this._onPlaylistStateChanged),super.dispose()}playlist(){return this.player().pillarboxPlaylist()}select(t){this.getChild("PillarboxPlaylistMenuItemsList").children().filter(s=>s.name()==="PillarboxPlaylistMenuItem").map(s=>s.getChild("PillarboxPlaylistMenuItemButton")).forEach(s=>s.selected(t===s.options().index))}removeItems(){this.removeChild(this.getChild("PillarboxPlaylistMenuItemsList"))}renderItems(){const t=new h(this.player(),{name:"PillarboxPlaylistMenuItemsList",el:l.dom.createEl("ol",{className:"pbw-playlist-items"})});this.playlist().items.forEach((e,s)=>{const n=new h(this.player(),{name:"PillarboxPlaylistMenuItem",el:l.dom.createEl("li",{className:"pbw-playlist-item"})});n.addChild(new $(this.player(),{item:e,index:s,name:"PillarboxPlaylistMenuItemButton"})),t.addChild(n)}),this.addChild(t)}createControls(){const t=new h(this.player(),{name:"PlaylistControls",className:"pbw-playlist-controls"});return t.addChild(this.createRepeatButton()),t.addChild(this.createSuffleButton()),t.addChild(this.createPreviousItemButton()),t.addChild(this.createNextItemButton()),t}createPreviousItemButton(){return this.setButtonIcon(new u(this.player(),{name:"PreviousItemButton",controlText:this.localize("Previous Item"),clickHandler:()=>this.playlist().previous()}),"previous-item")}createRepeatButton(){const t=this.setButtonIcon(new u(this.player(),{name:"RepeatButton",controlText:this.localize("Repeat"),className:this.playlist().repeat?"vjs-selected":"",clickHandler:()=>{this.playlist().toggleRepeat(),t.toggleClass("vjs-selected",this.playlist().repeat)}}),"repeat");return t}createSuffleButton(){return this.setButtonIcon(new u(this.player(),{name:"ShuffleButton",controlText:this.localize("Shuffle"),clickHandler:()=>this.playlist().shuffle()}),"shuffle")}createNextItemButton(){return this.setButtonIcon(new u(this.player(),{name:"NextItemButton",controlText:this.localize("Next Item"),clickHandler:()=>this.playlist().next()}),"next-item")}setButtonIcon(t,e){return t.setIcon(e),this.player().ready(()=>{t.$(".vjs-icon-placeholder").classList.toggle(`vjs-icon-${e}`,!0)}),t}renderComponent(){this.addChild(this.createControls()),this.renderItems()}handleLanguagechange(){const t=this.getChild("PlaylistControls");t.getChild("PreviousItemButton").controlText(this.localize("Previous Item")),t.getChild("RepeatButton").controlText(this.localize("Repeat")),t.getChild("ShuffleButton").controlText(this.localize("Shuffle")),t.getChild("NextItemButton").controlText(this.localize("Next Item"))}}l.registerComponent("PlaylistMenuDialog",j);const N="Wiedergabeliste",M="Wiederholen",T="Mischen",E={"Next Item":"Nächstes Element",Playlist:N,"Previous Item":"Vorheriges Element",Repeat:M,Shuffle:T},O="Playlist",R="Repeat",L="Shuffle",k={"Next Item":"Next Item",Playlist:O,"Previous Item":"Previous Item",Repeat:R,Shuffle:L},z="Liste de lecture",D="Répéter",H="Mélanger",U={"Next Item":"Élément suivant",Playlist:z,"Previous Item":"Élément précédent",Repeat:D,Shuffle:H},K="Playlist",V="Ripeti",A="Mescola",W={"Next Item":"Elemento successivo",Playlist:K,"Previous Item":"Elemento precedente",Repeat:V,Shuffle:A},q="Glista da reprodukziun",F="Repeter",G="Maschadar",J={"Next Item":"Element proxim",Playlist:q,"Previous Item":"Element precedent",Repeat:F,Shuffle:G};function a(i,t){var e;l.addLanguage(i,g(g({},(e=l.options.language[i])!==null&&e!==void 0?e:{}),t))}a("de",E);a("en",k);a("fr",U);a("it",W);a("rm",J);const Q=l.getComponent("Button");class X extends Q{constructor(t,e){super(t,e),c(this,"_onPlaylistStateChanged",({changes:s})=>{"items"in s&&this.toggleVisibility()}),this.handleLanguagechange(),this.setIcon("chapters"),t.ready(()=>{this.$(".vjs-icon-placeholder").classList.toggle("vjs-icon-chapters",!0),t.addChild("PlaylistMenuDialog",{pauseOnOpen:!1})}),this.playlist().on("statechanged",this._onPlaylistStateChanged)}dispose(){this.playlist().off("statechanged",this._onPlaylistStateChanged),super.dispose()}playlist(){return this.player().pillarboxPlaylist()}buildCSSClass(){return`pbw-playlist-button vjs-hidden ${super.buildCSSClass()}`}handleClick(t){super.handleClick(t),this.player().getChild("PlaylistMenuDialog").open()}handleLanguagechange(){this.controlText(this.localize("Playlist"))}toggleVisibility(){if(this.playlist().items.length>0){this.show();return}this.hide()}}l.registerComponent("PillarboxPlaylistButton",X);const Y=l.getPlugin("plugin");class Z extends Y{constructor(t,e){super(t),t.ready(function(){if(!e.insertChildBefore){t.controlBar.addChild("PillarboxPlaylistButton");return}const s=t.controlBar,n=s.getChild(e.insertChildBefore),o=s.children().indexOf(n);s.addChild("PillarboxPlaylistButton",{},o)})}}l.registerPlugin("pillarboxPlaylistUI",Z);const f=P("video-element-id",{autoplay:!0,plugins:{pillarboxPlaylist:{autoadvance:!0,repeat:!0},pillarboxPlaylistUI:{insertChildBefore:"fullscreenToggle"}}}),tt=["urn:rts:video:14827742","urn:srf:video:05457f66-fd67-4131-8e0a-6d85743efc39","urn:rtr:video:33136b80-bec6-40cd-a771-b8954c805098","urn:rts:video:9883196"];Promise.all(tt.map(async i=>{const e=(await p.getMediaComposition(i,p.dataProvider(f))).getMainChapter();return{sources:[{src:i,type:"srgssr/urn"}],data:{title:e.title,duration:e.duration/1e3},poster:e.imageUrl}})).then(i=>{f.pillarboxPlaylist().load(i)});document.querySelector("#close-btn").addEventListener("click",()=>{window.close()});window.pillarbox=P;
//# sourceMappingURL=playlist-wKK55w75.js.map
