<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <link rel="icon" type="image/x-icon" href="/favicon.ico"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pillarbox + UMD</title>
  <link rel="stylesheet" href="index.css"/>
</head>

<body>
<header>
  <div class="logo-container">
    <img src="pb.webp" class="logo" alt="Pillarbox logo"/>
    <img src="js.svg" class="logo ts" alt="TypeScript logo"/>
  </div>
  <h1>Pillarbox + UMD</h1>
</header>
<div class="player-container">
  <video-js id="main-player" class="pillarbox-js" controls crossorigin="anonymous"></video-js>
</div>
<script src="https://cdn.jsdelivr.net/npm/@srgssr/pillarbox-web@1.23.1/dist/pillarbox.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@srgssr/thumbnail-preview@1.0.2/dist/thumbnail-preview.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-contrib-quality-menu@1.0.4/dist/videojs-contrib-quality-menu.min.js"></script>
<script>
  const player = pillarbox('main-player', { plugins: { thumbnailPreview: {}, qualityMenu: true } });

  player.on('loadedmetadata', () => {
    const thumbnailPreview = player.thumbnailPreview();
    const spriteSheet = player
      .currentSource()
      .mediaData
      ?.chapters
      ?.find(chapter => chapter.urn === 'urn:rts:video:15532586')
      ?.spriteSheet;

    thumbnailPreview.updateSprite(spriteSheet);
  });

  // Load the video source for the player
  player.src({ src: 'urn:rts:video:15532586', type: 'srgssr/urn' });
</script>
</body>
</html>

