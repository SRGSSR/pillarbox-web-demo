{"version":3,"file":"chapters-DndkLofB.js","sources":["../../static/showcases/chapters.html?html-proxy&index=0.js","../../static/showcases/chapters.html?html-proxy&index=1.js"],"sourcesContent":["\n  // Import the pillarbox library\n  import pillarbox from '@srgssr/pillarbox-web';\n\n  const Plugin = pillarbox.getPlugin('plugin');\n\n  // A Pillarbox plugin to display information about the current chapter.\n  class CurrentChapterPlugin extends Plugin {\n    // Reference to the component used to display the current chapter information.\n    #component;\n\n    constructor(player, options) {\n      super(player, options);\n\n      // Attach the DOM element when the player is ready,\n      this.player.ready(() => this.#attachComponent());\n      // Wait for the chapter change event\n      this.player.on('srgssr/chapter', ({ data }) => this.#handleChapterChange(data));\n    }\n\n    #attachComponent() {\n      // Create a new component to display the current chapter information\n      this.#component = this.player.getChild('ControlBar').addChild('component', {\n        id: 'current-chapter',\n        // Set the class for styling and hide the element with 'vjs-hidden'\n        className: 'pbw-current-chapter vjs-hidden'\n      });\n\n      // Create an image element for the chapter thumbnail\n      const thumbnailImg = document.createElement('img');\n      thumbnailImg.className = 'pbw-chapter-thumbnail';\n\n      // Create a span element for the chapter title\n      const chapterText = document.createElement('span');\n      chapterText.className = 'pbw-chapter-title';\n\n      // Append the thumbnail and title elements to the component\n      this.#component.el().appendChild(thumbnailImg);\n      this.#component.el().appendChild(chapterText);\n\n      // Add a function to the component to update the chapter information\n      this.#component.updateData = (img, text) => {\n        chapterText.textContent = text;\n        thumbnailImg.src = img;\n      };\n    }\n\n    #handleChapterChange(data) {\n      // Check if there are active cues in the chapters text track\n      if (!data) {\n        // Hide the current chapter component if there are no active cues\n        this.#component.hide();\n        return;\n      }\n\n      // Parse the JSON content of the active cue to get the current chapter information\n      const currentChapter = JSON.parse(data.text);\n\n      // Update the displayed chapter title and thumbnail\n      this.#component.updateData(currentChapter.imageUrl, currentChapter.title);\n\n      // Show the current chapter component\n      this.#component.show();\n    }\n  }\n\n  // Register a plugin to display the currently playing chapter\n  pillarbox.registerPlugin('currentChapter', CurrentChapterPlugin);\n\n  // Create a pillarbox player instance with the currentChapter plugin\n  const player = pillarbox(\n    'video-element-id',\n    {\n      muted: true,\n      plugins: { currentChapter: true }\n    }\n  );\n\n  // Set the video source for the player\n  player.src({ src: 'urn:rts:video:10894383', type: 'srgssr/urn' });\n","\n  import pillarbox from '@srgssr/pillarbox-web';\n  import '../../src/layout/header/core-demo-header-component.js';\n\n  document.querySelector('#close-btn').addEventListener('click', () => {\n    window.close();\n  });\n\n  window.pillarbox = pillarbox;\n"],"names":["Plugin","pillarbox","CurrentChapterPlugin","#component","player","options","#attachComponent","data","#handleChapterChange","thumbnailImg","chapterText","img","text","currentChapter"],"mappings":"6DAIE,MAAMA,EAASC,EAAU,UAAU,QAAQ,EAG3C,MAAMC,UAA6BF,CAAO,CAExCG,GAEA,YAAYC,EAAQC,EAAS,CAC3B,MAAMD,EAAQC,CAAO,EAGrB,KAAK,OAAO,MAAM,IAAM,KAAKC,GAAgB,CAAE,EAE/C,KAAK,OAAO,GAAG,iBAAkB,CAAC,CAAE,KAAAC,CAAI,IAAO,KAAKC,GAAqBD,CAAI,CAAC,CAChF,CAEAD,IAAmB,CAEjB,KAAKH,GAAa,KAAK,OAAO,SAAS,YAAY,EAAE,SAAS,YAAa,CACzE,GAAI,kBAEJ,UAAW,gCACnB,CAAO,EAGD,MAAMM,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,wBAGzB,MAAMC,EAAc,SAAS,cAAc,MAAM,EACjDA,EAAY,UAAY,oBAGxB,KAAKP,GAAW,KAAK,YAAYM,CAAY,EAC7C,KAAKN,GAAW,KAAK,YAAYO,CAAW,EAG5C,KAAKP,GAAW,WAAa,CAACQ,EAAKC,IAAS,CAC1CF,EAAY,YAAcE,EAC1BH,EAAa,IAAME,CACrB,CACF,CAEAH,GAAqBD,EAAM,CAEzB,GAAI,CAACA,EAAM,CAET,KAAKJ,GAAW,KAAI,EACpB,MACF,CAGA,MAAMU,EAAiB,KAAK,MAAMN,EAAK,IAAI,EAG3C,KAAKJ,GAAW,WAAWU,EAAe,SAAUA,EAAe,KAAK,EAGxE,KAAKV,GAAW,KAAI,CACtB,CACJ,CAGEF,EAAU,eAAe,iBAAkBC,CAAoB,EAG/D,MAAME,EAASH,EACb,mBACA,CACE,MAAO,GACP,QAAS,CAAE,eAAgB,EAAI,CACrC,CACA,EAGEG,EAAO,IAAI,CAAE,IAAK,yBAA0B,KAAM,aAAc,EC3EhE,SAAS,cAAc,YAAY,EAAE,iBAAiB,QAAS,IAAM,CACnE,OAAO,MAAK,CACd,CAAC,EAED,OAAO,UAAYH"}