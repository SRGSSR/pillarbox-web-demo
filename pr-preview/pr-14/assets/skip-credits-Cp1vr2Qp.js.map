{"version":3,"file":"skip-credits-Cp1vr2Qp.js","sources":["../../static/showcases/skip-credits.html?html-proxy&index=0.js","../../static/showcases/skip-credits.html?html-proxy&index=1.js"],"sourcesContent":["\n  // Import the pillarbox library\n  import pillarbox from '@srgssr/pillarbox-web';\n\n  const Plugin = pillarbox.getPlugin('plugin');\n\n  // A Pillarbox plugin to display a skip button.\n  class SkipButton extends Plugin {\n    // Reference to the component used to display the skip button.\n    #component;\n\n    constructor(player, options) {\n      super(player, options);\n\n      // Attach the DOM element when the player is ready,\n      this.player.ready(() => this.#attachComponent());\n      // Wait for the 'loadeddata' event to handle the time intervals change\n      this.player.on('loadeddata', () => this.#timeIntervalsChange());\n    }\n\n    #attachComponent() {\n      this.#component = this.player.addChild('button', {\n        // Define the click handler for the button\n        clickHandler: () => {\n          // Get the text track with the ID 'srgssr-intervals'\n          const timeIntervals = this.player.textTracks().getTrackById('srgssr-intervals');\n          // Get the active time interval cue\n          const timeInterval = timeIntervals.activeCues[0];\n\n          // Set the player's current time to the 'markOut' value of the time interval\n          this.player.currentTime(timeInterval.endTime);\n        },\n        // Set the class for styling and hide the element with 'vjs-hidden'\n        className: 'pbw-skip-btn vjs-hidden',\n        // Set the control text for accessibility\n        controlText: 'Skip'\n      });\n    }\n\n    #timeIntervalsChange() {\n      // Get the text track with the ID 'srgssr-intervals'\n      const timeIntervals = player.textTracks().getTrackById('srgssr-intervals');\n\n      // Add a listener for the 'cuechange' event on the time intervals text track\n      timeIntervals?.on('cuechange', () => {\n        // Check if there are active cues in the time intervals text track\n        if (!timeIntervals.activeCues.length) {\n          // Hide the skip button if there are no active cues\n          this.#component.hide();\n          return;\n        }\n\n        // Show the skip button if there are active cues\n        this.#component.show();\n      });\n    }\n  }\n\n  // Register a plugin to skip credits\n  pillarbox.registerPlugin('skipButton', SkipButton);\n\n  // Create a pillarbox player instance with the skipButton plugin\n  const player = pillarbox(\n    'video-element-id',\n    { fill: true, plugins: { skipButton: {} } }\n  );\n\n  // Load the video source for the player\n  player.src({ src: 'urn:rts:video:14683290', type: 'srgssr/urn' });\n","\n  import pillarbox from '@srgssr/pillarbox-web';\n  import '../../src/layout/header/core-demo-header-component.js';\n\n  document.querySelector('#close-btn').addEventListener('click', () => {\n    window.close();\n  });\n\n  window.pillarbox = pillarbox;\n"],"names":["Plugin","pillarbox","SkipButton","player","options","__privateAdd","_attachComponent","_timeIntervalsChange","_component","__privateMethod","attachComponent_fn","timeIntervalsChange_fn","__privateSet","timeInterval","timeIntervals","__privateGet"],"mappings":"weAIE,MAAMA,EAASC,EAAU,UAAU,QAAQ,gBAG3C,MAAMC,UAAmBF,CAAO,CAI9B,YAAYG,EAAQC,EAAS,CAC3B,MAAMD,EAAQC,CAAO,EAQvBC,EAAA,KAAAC,GAmBAD,EAAA,KAAAE,GA9BAF,EAAA,KAAAG,EAAA,QAME,KAAK,OAAO,MAAM,IAAMC,EAAA,KAAKH,EAAAI,GAAL,UAAuB,EAE/C,KAAK,OAAO,GAAG,aAAc,IAAMD,EAAA,KAAKF,EAAAI,GAAL,UAA2B,CAC/D,CAsCF,CA/CCH,EAAA,YAWAF,EAAA,YAAAI,EAAgB,UAAG,CACjBE,EAAA,KAAKJ,EAAa,KAAK,OAAO,SAAS,SAAU,CAE/C,aAAc,IAAM,CAIlB,MAAMK,EAFgB,KAAK,OAAO,WAAU,EAAG,aAAa,kBAAkB,EAE3C,WAAW,CAAC,EAG/C,KAAK,OAAO,YAAYA,EAAa,OAAO,CAC7C,EAED,UAAW,0BAEX,YAAa,MACrB,CAAO,EACF,EAEDN,EAAA,YAAAI,EAAoB,UAAG,CAErB,MAAMG,EAAgBX,EAAO,WAAY,EAAC,aAAa,kBAAkB,EAGzEW,GAAA,MAAAA,EAAe,GAAG,YAAa,IAAM,CAEnC,GAAI,CAACA,EAAc,WAAW,OAAQ,CAEpCC,EAAA,KAAKP,GAAW,OAChB,MACD,CAGDO,EAAA,KAAKP,GAAW,MACxB,EACK,EAIHP,EAAU,eAAe,aAAcC,CAAU,EAGjD,MAAMC,EAASF,EACb,mBACA,CAAE,KAAM,GAAM,QAAS,CAAE,WAAY,CAAE,CAAA,CAAI,CAC/C,EAGEE,EAAO,IAAI,CAAE,IAAK,yBAA0B,KAAM,aAAc,EChEhE,SAAS,cAAc,YAAY,EAAE,iBAAiB,QAAS,IAAM,CACnE,OAAO,MAAK,CAChB,CAAG,EAED,OAAO,UAAYF"}