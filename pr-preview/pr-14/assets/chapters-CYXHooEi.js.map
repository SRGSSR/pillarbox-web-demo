{"version":3,"file":"chapters-CYXHooEi.js","sources":["../../static/showcases/chapters.html?html-proxy&index=0.js","../../static/showcases/chapters.html?html-proxy&index=1.js"],"sourcesContent":["\n  // Import the pillarbox library\n  import pillarbox from '@srgssr/pillarbox-web';\n\n  // Register a plugin to display the currently playing chapter\n  pillarbox.registerPlugin('currentChapter', function() {\n    // Get a reference to the player instance\n    const player = this;\n\n    // Wait for the player to be ready\n    player.ready(() => {\n      // Create a new component to display the current chapter information\n      const currentChapterComponent = player.getChild('ControlBar').addChild('component');\n      currentChapterComponent.addClass('pbw-current-chapter');\n\n      // Create an image element for the chapter thumbnail\n      const thumbailImg = document.createElement('img');\n      thumbailImg.className = 'pbw-chapter-thumbnail';\n\n      // Create a span element for the chapter title\n      const chapterText = document.createElement('span');\n      chapterText.className = 'pbw-chapter-title';\n\n      // Append the thumbnail and title elements to the component\n      currentChapterComponent.el().appendChild(thumbailImg);\n      currentChapterComponent.el().appendChild(chapterText);\n      currentChapterComponent.hide();\n\n      // Listen for the 'loadeddata' event on the player, this ensures that text tracks are available\n      player.on('loadeddata', () => {\n        // Get the text track with the ID 'srgssr-chapters'\n        const chapters = player.textTracks().getTrackById('srgssr-chapters');\n\n        // Add a listener for the 'cuechange' event on the chapters text track\n        chapters?.on('cuechange', () => {\n          // Check if there are active cues in the chapters text track\n          if (chapters.activeCues.length > 0) {\n            // Parse the JSON content of the active cue to get the current chapter information\n            const currentChapter = JSON.parse(chapters.activeCues[0].text);\n\n            // Update the displayed chapter title and thumbnail\n            chapterText.textContent = currentChapter.title;\n            chapterText.title = currentChapter.title;\n            thumbailImg.src = currentChapter.imageUrl;\n\n            // Show the current chapter component\n            currentChapterComponent.show();\n          } else {\n            // Hide the current chapter component if there are no active cues\n            currentChapterComponent.hide();\n          }\n        });\n      });\n    });\n  });\n\n  // Create a pillarbox player instance with the currentChapter plugin\n  const player = pillarbox(\n    'video-element-id',\n    { fill: true, plugins: { currentChapter: {} } }\n  );\n\n  // Set the video source for the player\n  player.src({ src: 'urn:rts:video:10894383', type: 'srgssr/urn' });\n","\n  import pillarbox from '@srgssr/pillarbox-web';\n  import '../../src/layout/header/core-demo-header-component.js';\n\n  document.querySelector('#close-btn').addEventListener('click', () => {\n    window.close();\n  });\n\n  window.pillarbox = pillarbox;\n"],"names":["pillarbox","player","currentChapterComponent","thumbailImg","chapterText","chapters","currentChapter"],"mappings":"mGAKEA,EAAU,eAAe,iBAAkB,UAAW,CAEpD,MAAMC,EAAS,KAGfA,EAAO,MAAM,IAAM,CAEjB,MAAMC,EAA0BD,EAAO,SAAS,YAAY,EAAE,SAAS,WAAW,EAClFC,EAAwB,SAAS,qBAAqB,EAGtD,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,wBAGxB,MAAMC,EAAc,SAAS,cAAc,MAAM,EACjDA,EAAY,UAAY,oBAGxBF,EAAwB,GAAE,EAAG,YAAYC,CAAW,EACpDD,EAAwB,GAAE,EAAG,YAAYE,CAAW,EACpDF,EAAwB,KAAI,EAG5BD,EAAO,GAAG,aAAc,IAAM,CAE5B,MAAMI,EAAWJ,EAAO,WAAY,EAAC,aAAa,iBAAiB,EAGnEI,GAAA,MAAAA,EAAU,GAAG,YAAa,IAAM,CAE9B,GAAIA,EAAS,WAAW,OAAS,EAAG,CAElC,MAAMC,EAAiB,KAAK,MAAMD,EAAS,WAAW,CAAC,EAAE,IAAI,EAG7DD,EAAY,YAAcE,EAAe,MACzCF,EAAY,MAAQE,EAAe,MACnCH,EAAY,IAAMG,EAAe,SAGjCJ,EAAwB,KAAI,CACxC,MAEYA,EAAwB,KAAI,CAExC,EACA,CAAO,CACP,CAAK,CACL,CAAG,EAGD,MAAMD,EAASD,EACb,mBACA,CAAE,KAAM,GAAM,QAAS,CAAE,eAAgB,CAAE,CAAA,CAAI,CACnD,EAGEC,EAAO,IAAI,CAAE,IAAK,yBAA0B,KAAM,aAAc,EC3DhE,SAAS,cAAc,YAAY,EAAE,iBAAiB,QAAS,IAAM,CACnE,OAAO,MAAK,CAChB,CAAG,EAED,OAAO,UAAYD"}