import{v as r,p as x,S as c}from"./core-demo-header-component-1irpUQGc.js";function p(s,e,t){return(e=R(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function E(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function R(s){var e=E(s,"string");return typeof e=="symbol"?e:e+""}const S="2.0.1",N=r.getPlugin("plugin"),m=r.log.createLogger("pillarbox-playlist"),u={NO_REPEAT:0,REPEAT_ALL:1,REPEAT_ONE:2};let v=class extends N{toggleRepeat(e=void 0){this.repeat=e??(this.repeat+1)%3}isRepeatOneMode(){return this.repeat===u.REPEAT_ONE}isRepeatAllMode(){return this.repeat===u.REPEAT_ALL}isNoRepeatMode(){return this.repeat===u.NO_REPEAT}toggleAutoadvance(e=void 0){this.autoadvance=e??!this.autoadvance}constructor(e,t){var i;super(e),p(this,"items_",[]),p(this,"currentIndex_",-1),p(this,"previousNavigationThreshold",3),p(this,"repeat",u.NO_REPEAT),p(this,"autoadvance",!1),p(this,"onEnded_",()=>this.handleEnded()),t=this.options_=r.obj.merge(this.options_,t),t.playlist&&t.playlist.length&&e.ready(()=>{this.load(...t.playlist)}),this.autoadvance=!!t.autoadvance,this.repeat=(i=t.repeat)!==null&&i!==void 0?i:this.repeat,this.previousNavigationThreshold=Number.isFinite(t.previousNavigationThreshold)?t.previousNavigationThreshold:this.previousNavigationThreshold,this.player.on("ended",this.onEnded_)}dispose(){this.player.off("ended",this.onEnded_)}load(e){this.items_=[...e],this.select(0)}push(...e){this.items_.push(...e),this.updateState_()}splice(e,t,...i){const l=i.length,h=this.items_.splice(e,t,...i),n=h.length;return this.currentIndex_>=e&&this.currentIndex_<e+n?this.currentIndex_=-1:this.currentIndex_>=e&&(this.currentIndex_=this.currentIndex_-n+l),this.updateState_(),h}clear(){this.items_=[],this.currentIndex_=-1,this.updateState_()}reverse(){this.items_.length&&(this.items_.reverse(),this.currentIndex_=this.items_.length-1-this.currentIndex_,this.updateState_())}sort(e){if(!this.items_.length)return;const t=this.currentItem;this.items_.sort(e),this.currentIndex_=this.items_.indexOf(t),this.updateState_()}get currentIndex(){return this.currentIndex_}get currentItem(){return this.items_[this.currentIndex_]}get items(){return[...this.items_]}select(e){if(e<0||e>=this.items_.length){m.warn(`Index: ${e} is out of bounds (The current playlist has ${this.items_.length} elements)`);return}if(e===this.currentIndex_){m.warn(`Index: ${e} is already selected`);return}const t=this.items_[e];this.player.src(t.sources),this.player.poster(t.poster),this.currentIndex_=e,this.updateState_()}next(){if(this.hasNext()){this.select(this.currentIndex_+1);return}this.repeat===u.REPEAT_ALL&&this.select(0)}hasNext(){return this.currentIndex_+1<this.items_.length}previous(){if(!this.isLive()&&this.player.currentTime()>this.previousNavigationThreshold){this.player.currentTime(0);return}if(this.hasPrevious()){this.select(this.currentIndex_-1);return}this.repeat===u.REPEAT_ALL&&this.select(this.items_.length-1)}isLive(){const e=this.player.liveTracker;return e&&e.isLive()}hasPrevious(){return this.currentIndex_>0}handleEnded(){if(this.repeat===u.REPEAT_ONE){this.player.play().then(()=>{});return}this.autoadvance&&this.next()}shuffle(){for(let e=this.items_.length-1;e>0;e-=1){const t=Math.floor(Math.random()*(e+1));[this.items_[e],this.items_[t]]=[this.items_[t],this.items_[e]],this.currentIndex_===e?this.currentIndex_=t:this.currentIndex_===t&&(this.currentIndex_=e)}this.updateState_()}updateState_(){this.setState({items:JSON.stringify(this.items_),currentIndex:this.currentIndex_})}static get VERSION(){return S}};v.prototype.options_={autoadvance:!1,repeat:!1};r.registerPlugin("pillarboxPlaylist",v);function o(s,e,t){return(e=O(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function g(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),t.push.apply(t,i)}return t}function y(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?g(Object(t),!0).forEach(function(i){o(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function T(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function O(s){var e=T(s,"string");return typeof e=="symbol"?e:e+""}const $=r.getComponent("Button");class A extends ${constructor(e,t){t=r.mergeOptions({controlText:"Playlist"},t),super(e,t),o(this,"onPlaylistStateChanged_",({changes:i})=>{"items"in i&&this.toggleVisibility()}),this.setIcon("chapters"),this.playlist().on("statechanged",this.onPlaylistStateChanged_)}playlist(){return this.player().pillarboxPlaylist()}ready(){this.$(".vjs-icon-placeholder").classList.toggle("vjs-icon-chapters",!0)}dispose(){this.playlist().off("statechanged",this.onPlaylistStateChanged_),super.dispose()}buildCSSClass(){return`pbw-playlist-button vjs-hidden ${super.buildCSSClass()}`}handleClick(e){super.handleClick(e),this.player().getChild("PillarboxPlaylistMenuDialog").open()}toggleVisibility(){if(this.playlist().items.length>0){this.show();return}this.hide()}}r.registerComponent("PillarboxPlaylistButton",A);const B=r.getComponent("Button");let M=class extends B{constructor(e,t){var i,l;super(e,t),this.selected(t.index===this.playlist().currentIndex),this.controlText(`${(i=this.options_.item.data)===null||i===void 0?void 0:i.title} - ${r.formatTime((l=this.options_.item.data)===null||l===void 0?void 0:l.duration)}`)}playlist(){return this.player().pillarboxPlaylist()}handleClick(e){super.handleClick(e),this.playlist().select(this.options_.index)}selected(e){this.toggleClass("vjs-selected",e)}buildCSSClass(){return`pbw-playlist-item-button vjs-visible-text ${super.buildCSSClass()}`}};r.registerComponent("PillarboxPlaylistMenuItem",M);const L=r.getComponent("Button");class j extends L{constructor(e,t){t=r.mergeOptions({controlText:"Next Item"},t),super(e,t),this.setIcon("next-item")}playlist(){return this.player().pillarboxPlaylist()}ready(){this.$(".vjs-icon-placeholder").classList.toggle("vjs-icon-next-item",!0)}handleClick(e){super.handleClick(e),this.playlist().next()}}r.registerComponent("PillarboxPlaylistNextItemButton",j);const w=r.getComponent("Button");class k extends w{constructor(e,t){t=r.mergeOptions({controlText:"Previous Item"},t),super(e,t),this.setIcon("previous-item")}playlist(){return this.player().pillarboxPlaylist()}ready(){this.$(".vjs-icon-placeholder").classList.toggle("vjs-icon-previous-item",!0)}handleClick(e){super.handleClick(e),this.playlist().previous()}}r.registerComponent("PillarboxPlaylistPreviousItemButton",k);const D="2.0.1",U=r.getPlugin("plugin"),_=r.log.createLogger("pillarbox-playlist"),a={NO_REPEAT:0,REPEAT_ALL:1,REPEAT_ONE:2};class b extends U{toggleRepeat(e=void 0){this.repeat=e??(this.repeat+1)%3}isRepeatOneMode(){return this.repeat===a.REPEAT_ONE}isRepeatAllMode(){return this.repeat===a.REPEAT_ALL}isNoRepeatMode(){return this.repeat===a.NO_REPEAT}toggleAutoadvance(e=void 0){this.autoadvance=e??!this.autoadvance}constructor(e,t){var i;super(e),o(this,"items_",[]),o(this,"currentIndex_",-1),o(this,"previousNavigationThreshold",3),o(this,"repeat",a.NO_REPEAT),o(this,"autoadvance",!1),o(this,"onEnded_",()=>this.handleEnded()),t=this.options_=r.obj.merge(this.options_,t),t.playlist&&t.playlist.length&&e.ready(()=>{this.load(...t.playlist)}),this.autoadvance=!!t.autoadvance,this.repeat=(i=t.repeat)!==null&&i!==void 0?i:this.repeat,this.previousNavigationThreshold=Number.isFinite(t.previousNavigationThreshold)?t.previousNavigationThreshold:this.previousNavigationThreshold,this.player.on("ended",this.onEnded_)}dispose(){this.player.off("ended",this.onEnded_)}load(e){this.items_=[...e],this.select(0)}push(...e){this.items_.push(...e),this.updateState_()}splice(e,t,...i){const l=i.length,h=this.items_.splice(e,t,...i),n=h.length;return this.currentIndex_>=e&&this.currentIndex_<e+n?this.currentIndex_=-1:this.currentIndex_>=e&&(this.currentIndex_=this.currentIndex_-n+l),this.updateState_(),h}clear(){this.items_=[],this.currentIndex_=-1,this.updateState_()}reverse(){this.items_.length&&(this.items_.reverse(),this.currentIndex_=this.items_.length-1-this.currentIndex_,this.updateState_())}sort(e){if(!this.items_.length)return;const t=this.currentItem;this.items_.sort(e),this.currentIndex_=this.items_.indexOf(t),this.updateState_()}get currentIndex(){return this.currentIndex_}get currentItem(){return this.items_[this.currentIndex_]}get items(){return[...this.items_]}select(e){if(e<0||e>=this.items_.length){_.warn(`Index: ${e} is out of bounds (The current playlist has ${this.items_.length} elements)`);return}if(e===this.currentIndex_){_.warn(`Index: ${e} is already selected`);return}const t=this.items_[e];this.player.src(t.sources),this.player.poster(t.poster),this.currentIndex_=e,this.updateState_()}next(){if(this.hasNext()){this.select(this.currentIndex_+1);return}this.repeat===a.REPEAT_ALL&&this.select(0)}hasNext(){return this.currentIndex_+1<this.items_.length}previous(){if(!this.isLive()&&this.player.currentTime()>this.previousNavigationThreshold){this.player.currentTime(0);return}if(this.hasPrevious()){this.select(this.currentIndex_-1);return}this.repeat===a.REPEAT_ALL&&this.select(this.items_.length-1)}isLive(){const e=this.player.liveTracker;return e&&e.isLive()}hasPrevious(){return this.currentIndex_>0}handleEnded(){if(this.repeat===a.REPEAT_ONE){this.player.play().then(()=>{});return}this.autoadvance&&this.next()}shuffle(){for(let e=this.items_.length-1;e>0;e-=1){const t=Math.floor(Math.random()*(e+1));[this.items_[e],this.items_[t]]=[this.items_[t],this.items_[e]],this.currentIndex_===e?this.currentIndex_=t:this.currentIndex_===t&&(this.currentIndex_=e)}this.updateState_()}updateState_(){this.setState({items:JSON.stringify(this.items_),currentIndex:this.currentIndex_})}static get VERSION(){return D}}b.prototype.options_={autoadvance:!1,repeat:!1};r.registerPlugin("pillarboxPlaylist",b);const V=r.getComponent("Button");class K extends V{constructor(e,t){t=r.mergeOptions({controlText:"Repeat"},t),super(e,t),this.controlText(this.repeatModeAsString()),this.setIcon("repeat")}playlist(){return this.player().pillarboxPlaylist()}ready(){this.$(".vjs-icon-placeholder").classList.toggle("vjs-icon-repeat",!0)}repeatModeAsString(){switch(this.playlist().repeat){case a.NO_REPEAT:return"No Repeat";case a.REPEAT_ALL:return"Repeat All";case a.REPEAT_ONE:return"Repeat One"}}buildCSSClass(){return`${this.playlist().repeat?"vjs-selected":""} ${super.buildCSSClass()}`}handleClick(e){super.handleClick(e),this.playlist().toggleRepeat(),this.toggleClass("vjs-selected",!this.playlist().isNoRepeatMode()),this.toggleClass("pbw-repeat-one",this.playlist().isRepeatOneMode()),this.controlText(this.repeatModeAsString()),this.setAttribute("aria-pressed",!this.playlist().isNoRepeatMode())}}r.registerComponent("PillarboxPlaylistRepeatButton",K);const W=r.getComponent("Button");class z extends W{constructor(e,t){t=r.mergeOptions({controlText:"Shuffle"},t),super(e,t),this.setIcon("shuffle")}playlist(){return this.player().pillarboxPlaylist()}ready(){this.$(".vjs-icon-placeholder").classList.toggle("vjs-icon-shuffle",!0)}handleClick(e){super.handleClick(e),this.playlist().shuffle()}}r.registerComponent("PillarboxPlaylistShuffleButton",z);const q=r.getComponent("Component");class I extends q{}I.prototype.options_={className:"pbw-playlist-controls",children:["pillarboxPlaylistRepeatButton","pillarboxPlaylistShuffleButton","pillarboxPlaylistPreviousItemButton","pillarboxPlaylistNextItemButton"]};r.registerComponent("PillarboxPlaylistControls",I);const F=r.getComponent("PillarboxPlaylistMenuItem"),P=r.getComponent("Component"),J=r.getComponent("ModalDialog");class G extends J{constructor(e,t){t.temporary=!1,t=r.mergeOptions({pauseOnOpen:!1},t),super(e,t),o(this,"onPlaylistStateChanged_",({changes:i})=>{"items"in i&&(this.removeItems(),this.renderItems()),"currentIndex"in i&&this.select(i.currentIndex.to)}),this.fill(),this.addChild("PillarboxPlaylistControls",t.pillarboxPlaylistControls),this.renderItems(),this.playlist().on("statechanged",this.onPlaylistStateChanged_)}buildCSSClass(){return`pbw-playlist-dialog ${super.buildCSSClass()}`}dispose(){this.playlist().off("statechanged",this.onPlaylistStateChanged_),super.dispose()}playlist(){return this.player().pillarboxPlaylist()}select(e){this.getChild("PillarboxPlaylistMenuItemsList").children().filter(i=>i.name()==="PillarboxPlaylistMenuItem").map(i=>i.getChild("PillarboxPlaylistMenuItemButton")).forEach(i=>i.selected(e===i.options().index))}removeItems(){this.removeChild(this.getChild("PillarboxPlaylistMenuItemsList"))}renderItems(){const e=new P(this.player(),{name:"PillarboxPlaylistMenuItemsList",el:r.dom.createEl("ol",{className:"pbw-playlist-items"})});this.playlist().items.forEach((t,i)=>{const l=new P(this.player(),{name:"PillarboxPlaylistMenuItem",el:r.dom.createEl("li",{className:"pbw-playlist-item"})});l.addChild(new F(this.player(),{item:t,index:i,name:"PillarboxPlaylistMenuItemButton"})),e.addChild(l)}),this.addChild(e)}}r.registerComponent("PillarboxPlaylistMenuDialog",G);const H="Wiedergabeliste",Q="Mischen",X={"Next Item":"Nächstes element","No Repeat":"Keine Wiederholung",Playlist:H,"Previous Item":"Vorheriges Element","Repeat All":"Alle Wiederholen","Repeat One":"Einzelnes Wiederholen",Shuffle:Q},Y="Playlist",Z="Shuffle",ee={"Next Item":"Next Item","No Repeat":"No Repeat",Playlist:Y,"Previous Item":"Previous Item","Repeat All":"Repeat All","Repeat One":"Repeat One",Shuffle:Z},te="Liste de lecture",ie="Mélanger",se={"Next Item":"Élément suivant","No Repeat":"Pas de Répétition",Playlist:te,"Previous Item":"Élément précédent","Repeat All":"Répéter Tout","Repeat One":"Répéter Un",Shuffle:ie},re="Playlist",le="Mescola",ne={"Next Item":"Elemento successivo","No Repeat":"Nessuna Ripetizione",Playlist:re,"Previous Item":"Elemento precedente","Repeat All":"Ripeti Tutto","Repeat One":"Ripeti Uno",Shuffle:le},ae="Glista da reprodukziun",oe="Maschadar",he={"Next Item":"Element proxim","No Repeat":"Nagins Repeter",Playlist:ae,"Previous Item":"Element precedent","Repeat All":"Repeter Tut","Repeat One":"Repeter In",Shuffle:oe};function d(s,e){var t;r.addLanguage(s,y(y({},(t=r.options.language[s])!==null&&t!==void 0?t:{}),e))}d("de",X);d("en",ee);d("fr",se);d("it",ne);d("rm",he);const ue=r.getPlugin("plugin"),pe=r.log.createLogger("pillarbox-playlist-ui");class C extends ue{constructor(e,t){var i;if(super(e),!e.usingPlugin("pillarboxPlaylist")){pe.error("pillarbox-playlist plugin is required");return}t=this.options_=r.obj.merge(this.options_,t),e.options({pillarboxPlaylistMenuDialog:(i=t.pillarboxPlaylistMenuDialog)!==null&&i!==void 0?i:!0,controlBar:this.mergeControlBarOptions(e,t)})}mergeControlBarOptions(e,t){var i;if(e.options_.controlBar===!1)return e.options_.controlBar;const l=r.obj.merge(r.getComponent("ControlBar").prototype.options_,e.options_.controlBar),h=l.children.findIndex(n=>n===t.insertChildBefore);if(t.insertChildBefore&&h!==-1){const n=[...l.children];return n.splice(h,0,"pillarboxPlaylistButton"),l.children=n,l}return l.pillarboxPlaylistButton=(i=t.pillarboxPlaylistButton)!==null&&i!==void 0?i:!0,l}}C.prototype.options_={insertChildBefore:"fullscreenToggle"};r.registerPlugin("pillarboxPlaylistUI",C);const f=x("video-element-id",{autoplay:!0,muted:!0,plugins:{pillarboxPlaylist:{autoadvance:!0,repeat:!0},pillarboxPlaylistUI:{insertChildBefore:"fullscreenToggle"}}}),de=["urn:rts:video:14827742","urn:srf:video:05457f66-fd67-4131-8e0a-6d85743efc39","urn:rtr:video:33136b80-bec6-40cd-a771-b8954c805098","urn:rts:video:9883196"];Promise.all(de.map(async s=>{const t=(await c.getMediaComposition(s,c.dataProvider(f))).getMainChapter();return{sources:[{src:s,type:"srgssr/urn"}],data:{title:t.title,duration:t.duration/1e3},poster:t.imageUrl}})).then(s=>{f.pillarboxPlaylist().load(s)});document.querySelector("#close-btn").addEventListener("click",()=>{window.close()});window.pillarbox=x;
//# sourceMappingURL=playlist-BVVki0Yd.js.map
