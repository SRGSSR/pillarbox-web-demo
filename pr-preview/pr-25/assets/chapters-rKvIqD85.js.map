{"version":3,"file":"chapters-rKvIqD85.js","sources":["../../static/showcases/chapters.html?html-proxy&index=0.js","../../static/showcases/chapters.html?html-proxy&index=1.js"],"sourcesContent":["\n  // Import the pillarbox library\n  import pillarbox from '@srgssr/pillarbox-web';\n\n  const Plugin = pillarbox.getPlugin('plugin');\n\n  // A Pillarbox plugin to display information about the current chapter.\n  class CurrentChapterPlugin extends Plugin {\n    // Reference to the component used to display the current chapter information.\n    #component;\n\n    constructor(player, options) {\n      super(player, options);\n\n      // Attach the DOM element when the player is ready,\n      this.player.ready(() => this.#attachComponent());\n      // Wait for the 'loadeddata' event to handle the chapter change\n      this.player.on('loadeddata', () => this.#handleChapterChange());\n    }\n\n    #attachComponent() {\n      // Create a new component to display the current chapter information\n      this.#component = this.player.getChild('ControlBar').addChild('component', {\n        id: 'current-chapter',\n        // Set the class for styling and hide the element with 'vjs-hidden'\n        className: 'pbw-current-chapter vjs-hidden'\n      });\n\n      // Create an image element for the chapter thumbnail\n      const thumbnailImg = document.createElement('img');\n      thumbnailImg.className = 'pbw-chapter-thumbnail';\n\n      // Create a span element for the chapter title\n      const chapterText = document.createElement('span');\n      chapterText.className = 'pbw-chapter-title';\n\n      // Append the thumbnail and title elements to the component\n      this.#component.el().appendChild(thumbnailImg);\n      this.#component.el().appendChild(chapterText);\n\n      // Add a function to the component to update the chapter information\n      this.#component.updateData = (img, text) => {\n        chapterText.textContent = text;\n        thumbnailImg.src = img;\n      };\n    }\n\n    #handleChapterChange() {\n      // Get the text track with the ID 'srgssr-chapters'\n      const chapters = this.player.textTracks().getTrackById('srgssr-chapters');\n\n      // Add a listener for the 'cuechange' event on the chapters text track\n      chapters?.on('cuechange', () => {\n        // Check if there are active cues in the chapters text track\n        if (!chapters.activeCues.length) {\n          // Hide the current chapter component if there are no active cues\n          this.#component.hide();\n          return;\n        }\n\n        // Parse the JSON content of the active cue to get the current chapter information\n        const currentChapter = JSON.parse(chapters.activeCues[0].text);\n\n        // Update the displayed chapter title and thumbnail\n        this.#component.updateData(currentChapter.imageUrl, currentChapter.title);\n\n        // Show the current chapter component\n        this.#component.show();\n      });\n    }\n  }\n\n  // Register a plugin to display the currently playing chapter\n  pillarbox.registerPlugin('currentChapter', CurrentChapterPlugin);\n\n  // Create a pillarbox player instance with the currentChapter plugin\n  const player = pillarbox(\n    'video-element-id',\n    { plugins: { currentChapter: true } }\n  );\n\n  // Set the video source for the player\n  player.src({ src: 'urn:rts:video:10894383', type: 'srgssr/urn' });\n","\n  import pillarbox from '@srgssr/pillarbox-web';\n  import '../../src/layout/header/core-demo-header-component.js';\n\n  document.querySelector('#close-btn').addEventListener('click', () => {\n    window.close();\n  });\n\n  window.pillarbox = pillarbox;\n"],"names":["Plugin","pillarbox","CurrentChapterPlugin","player","options","__privateAdd","_attachComponent","_handleChapterChange","_component","__privateMethod","attachComponent_fn","handleChapterChange_fn","__privateSet","thumbnailImg","chapterText","__privateGet","img","text","chapters","currentChapter"],"mappings":"meAIE,MAAMA,EAASC,EAAU,UAAU,QAAQ,gBAG3C,MAAMC,UAA6BF,CAAO,CAIxC,YAAYG,EAAQC,EAAS,CAC3B,MAAMD,EAAQC,CAAO,EAQvBC,EAAA,KAAAC,GA2BAD,EAAA,KAAAE,GAtCAF,EAAA,KAAAG,EAAA,QAME,KAAK,OAAO,MAAM,IAAMC,EAAA,KAAKH,EAAAI,GAAL,UAAuB,EAE/C,KAAK,OAAO,GAAG,aAAc,IAAMD,EAAA,KAAKF,EAAAI,GAAL,UAA2B,CAC/D,CAoDF,CA7DCH,EAAA,YAWAF,EAAA,YAAAI,EAAgB,UAAG,CAEjBE,EAAA,KAAKJ,EAAa,KAAK,OAAO,SAAS,YAAY,EAAE,SAAS,YAAa,CACzE,GAAI,kBAEJ,UAAW,gCACnB,CAAO,GAGD,MAAMK,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,wBAGzB,MAAMC,EAAc,SAAS,cAAc,MAAM,EACjDA,EAAY,UAAY,oBAGxBC,EAAA,KAAKP,GAAW,GAAI,EAAC,YAAYK,CAAY,EAC7CE,EAAA,KAAKP,GAAW,GAAI,EAAC,YAAYM,CAAW,EAG5CC,EAAA,KAAKP,GAAW,WAAa,CAACQ,EAAKC,IAAS,CAC1CH,EAAY,YAAcG,EAC1BJ,EAAa,IAAMG,CAC3B,CACK,EAEDT,EAAA,YAAAI,EAAoB,UAAG,CAErB,MAAMO,EAAW,KAAK,OAAO,WAAU,EAAG,aAAa,iBAAiB,EAGxEA,GAAA,MAAAA,EAAU,GAAG,YAAa,IAAM,CAE9B,GAAI,CAACA,EAAS,WAAW,OAAQ,CAE/BH,EAAA,KAAKP,GAAW,OAChB,MACD,CAGD,MAAMW,EAAiB,KAAK,MAAMD,EAAS,WAAW,CAAC,EAAE,IAAI,EAG7DH,EAAA,KAAKP,GAAW,WAAWW,EAAe,SAAUA,EAAe,KAAK,EAGxEJ,EAAA,KAAKP,GAAW,MACxB,EACK,EAIHP,EAAU,eAAe,iBAAkBC,CAAoB,EAG/D,MAAMC,EAASF,EACb,mBACA,CAAE,QAAS,CAAE,eAAgB,GAAQ,CACzC,EAGEE,EAAO,IAAI,CAAE,IAAK,yBAA0B,KAAM,aAAc,EC9EhE,SAAS,cAAc,YAAY,EAAE,iBAAiB,QAAS,IAAM,CACnE,OAAO,MAAK,CAChB,CAAG,EAED,OAAO,UAAYF"}